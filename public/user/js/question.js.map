{"version":3,"sources":["question.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"question.js","sourcesContent":["$(document).ready(function() {\r\n    var error = $('.data').attr('data-error');\r\n    var sumImageSize = 0;\r\n    var obj = [];\r\n    var arrayQuestion = [];\r\n    var arrayAnswer = [];\r\n    var arrayImageAnswer = [];\r\n    var arrayImageQuestion = [];\r\n    var size = 0;\r\n    var getProperty = function (propertyName) {\r\n        return obj[propertyName];\r\n    };\r\n\r\n    function addAnwser($this) {\r\n        var url = $this.attr('url');\r\n        var type = $this.attr('typeId');\r\n        var number = parseInt($($this).attr('id-as'));\r\n        var trash = parseInt($('.question' + number).attr('trash'));\r\n        var num_as = (parseInt($('.question' + number).attr('temp-qs')) + 1);\r\n        $.post(\r\n            url,\r\n            {\r\n                'number': number,\r\n                'num_as': num_as,\r\n                'type': type,\r\n            },\r\n            function(response) {\r\n\r\n                if (response.success) {\r\n                    $('.temp-other' + number +':first').before(response.data);\r\n                    $('.question' + number).attr('temp-qs', num_as);\r\n                    $('.question' + number).attr('trash', trash + 1);\r\n                } else {\r\n                    alert(error);\r\n                }\r\n        });\r\n    }\r\n\r\n    function addOtherButton($this, class_temp) {\r\n        var number = parseInt($this.parent().parent().find(class_temp).attr('id-as'));\r\n        var type = $this.attr('typeId');\r\n        var url = $this.attr('url');\r\n        $.post(\r\n            url,\r\n            {\r\n                'number': number,\r\n                'type': type,\r\n            },\r\n            function(response) {\r\n\r\n                if (response.success) {\r\n                    var trash = parseInt($('.question' + number).attr('trash'));\r\n                    $('.question' + number).attr('trash', trash + 1);\r\n                    $('.temp-other' + number + ':first').before(response.data);\r\n                } else {\r\n                    alert(error);\r\n                }\r\n        });\r\n        $this.hide();\r\n    }\r\n\r\n    function addQuestion($this) {\r\n        var number = parseInt($('.data').attr('data-number')) + 1;\r\n        var number_qs = parseInt($('.data').attr('data-question')) + 1;\r\n        var type = $this.attr('typeId');\r\n        var url = $this.attr('url');\r\n        $.post(\r\n            url,\r\n            {\r\n                'number': number,\r\n                'type': type,\r\n            },\r\n            function(response) {\r\n\r\n                if (response.success) {\r\n                    $('.hide').before(response.data);\r\n                    $('.data').attr('data-number', number);\r\n                    $('.data').attr('data-question', number_qs);\r\n                    $('.div-finish').css('display', 'block');\r\n                } else {\r\n                    alert(error);\r\n                }\r\n        });\r\n    }\r\n\r\n    function checkTypeImage(input) {\r\n        var fileExtension = ['jpeg', 'jpg', 'png', 'gif', 'bmp'];\r\n        var fileName = input.name;\r\n        var fileNameExt = fileName.substr(fileName.lastIndexOf('.') + 1);\r\n\r\n        if ($.inArray(fileNameExt. toLowerCase(), fileExtension) == -1){\r\n\r\n           return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    function readURL(input, $class) {\r\n        // sumImageSize += input.files[0].size/1024/1024;\r\n        var key = $class;\r\n\r\n        if (input.files && input.files[0] ) {\r\n            obj[key] = input.files[0].size;\r\n            size++;\r\n            var reader = new FileReader();\r\n\r\n            reader.onload = function (e) {\r\n                $($class).attr('src', e.target.result);\r\n            }\r\n\r\n            reader.readAsDataURL(input.files[0]);\r\n        } else {\r\n            // sumImageSize -= input.files[0].size/1024/1024;\r\n            obj[key] = 0;\r\n\r\n            return false;\r\n        }\r\n    }\r\n\r\n    $(document).on('click', '.add-radio', function() {\r\n        addAnwser($(this));\r\n    });\r\n\r\n    $(document).on('click', '.add-checkbox', function() {\r\n        addAnwser($(this));\r\n    });\r\n\r\n    $(document).on('click', '.add-radio-other',  function() {\r\n        var class_temp = '.add-radio';\r\n        addOtherButton($(this), class_temp);\r\n    });\r\n\r\n    $(document).on('click', '.add-checkbox-other', function() {\r\n        var class_temp = '.add-checkbox';\r\n        addOtherButton($(this), class_temp);\r\n    });\r\n\r\n    $(document).on('click', '#radio-button', function() {\r\n        addQuestion($(this));\r\n    });\r\n\r\n    $(document).on('click', '#checkbox-button', function() {\r\n        addQuestion($(this));\r\n    });\r\n\r\n    $(document).on('click', '#text-button', function() {\r\n        addQuestion($(this));\r\n    });\r\n\r\n    $(document).on('click', '#time-button', function() {\r\n        addQuestion($(this));\r\n    });\r\n\r\n    $(document).on('click', '#date-button', function() {\r\n        addQuestion($(this));\r\n    });\r\n\r\n    $(document).on('click', '.title-question', function() {\r\n        $(this).children('.choose-action').fadeIn(1700);\r\n        $('.title-question').css('box-shadow', '').css('border-radius', '');\r\n        $(this).css('box-shadow', '0px 2px 10px rgba(119, 132, 130, 0.56)')\r\n            .css('border-radius', '5px');\r\n    });\r\n\r\n    $(document).on('click', '.glyphicon-picture', function() {\r\n        var idQuestion = $(this).siblings('.glyphicon-trash').attr('id-question');\r\n        $('.fileImg' + idQuestion).click();\r\n        $(document).on('change', '.fileImg' + idQuestion, function () {\r\n            var image = readURL(this, '.image-question' + idQuestion);\r\n\r\n            if (image == false) {\r\n                $('.image-question' + idQuestion).attr('src', '/');\r\n                $('.content-image-question' + idQuestion).css('display', 'none');\r\n            } else {\r\n                $('.content-image-question' + idQuestion).css('display', 'block');\r\n            }\r\n        });\r\n    });\r\n\r\n    $(document).on('click', '.remove-image-question', function() {\r\n        var idQuestion = $(this).attr('id-question');\r\n        var idImage = $(this).attr('data-id-image');\r\n        arrayImageQuestion.push(idImage);\r\n        $('.content-image-question' + idQuestion).fadeOut(500);\r\n        setTimeout(function() {\r\n            sumImageSize -= getProperty('.image-question' + idQuestion);\r\n            obj['.image-question' + idQuestion] = 0;\r\n            $('.image-question' + idQuestion).attr('src', '/');\r\n            $('.content-image-question' + idQuestion).css('display', 'none');\r\n        }, 1000);\r\n\r\n    });\r\n\r\n    $(document).on('click', '.btn-change-survey', function() {\r\n        $('input[name=del-question]').val(arrayQuestion);\r\n        $('input[name=del-answer]').val(arrayAnswer);\r\n        $('input[name=del-question-image]').val(arrayImageQuestion);\r\n        $('input[name=del-answer-image]').val(arrayImageAnswer);\r\n\r\n        // return false;\r\n    });\r\n\r\n    $(document).on('click', '.show-multi-history', function() {\r\n        var url = $(this).attr('data-url');\r\n        $.get(\r\n            url,\r\n            function(response) {\r\n\r\n                if (response.success) {\r\n                    $('body').css('overflow', 'hidden');\r\n                    $('.popup-user-answer').css('display', 'block');\r\n                    $('.popup-content-history').append(response.data);\r\n                } else {\r\n                    alert(error);\r\n                }\r\n        });\r\n    });\r\n\r\n    $(document).on('click', '.hidden-result', function() {\r\n        $('body').css('overflow', 'auto');\r\n        $('.popup-user-answer').css('display', 'none');\r\n        $('.popup-content-history').empty();\r\n    });\r\n\r\n    $(document).on('click', '.picture-answer', function() {\r\n        var idAnswer = $(this).siblings('.glyphicon-remove').attr('id-as');\r\n        $('.fileImgAnswer' + idAnswer).click();\r\n        $(document).on('change', '.fileImgAnswer' + idAnswer, function () {\r\n            var image = readURL(this, '.image-answer' + idAnswer);\r\n\r\n            if (image == false) {\r\n                $('.image-answer' + idAnswer).attr('src', '/');\r\n                $('.content-image-answer' + idAnswer).css('display', 'none');\r\n            } else {\r\n                $('.content-image-answer' + idAnswer).css('display', 'block');\r\n            }\r\n        });\r\n    });\r\n\r\n    $(document).on('click', '.remove-image-answer', function() {\r\n        var idAnswer = $(this).attr('id-answer');\r\n        var idImage =  $(this).attr('data-answerid');\r\n        $('.content-image-answer' + idAnswer).fadeOut(500);\r\n        arrayImageAnswer.push(idImage);\r\n\r\n        setTimeout(function() {\r\n            sumImageSize -= getProperty('.image-answer' + idAnswer);\r\n            obj['.image-answer' + idAnswer] = 0;\r\n            $('.image-answer' + idAnswer).attr('src', '/');\r\n            $('.content-image-answer' + idAnswer).css('display', 'none');\r\n        }, 1000);\r\n\r\n    });\r\n\r\n    $(document).on('click', '.btn-require-answer', function() {\r\n        addQuestion($(this));\r\n    });\r\n\r\n    $(document).on('click', '.glyphicon-trash', function() {\r\n        var number_qs = parseInt($('.data').attr('data-question')) - 1;\r\n        var idQuestion = $(this).attr('id-question');\r\n        var sum = 0;\r\n        arrayQuestion.push(idQuestion);\r\n\r\n        if(number_qs == 0) {\r\n            $('.div-finish').css('display', 'none');\r\n        }\r\n\r\n        for (var i = 0; i < size; i++) {\r\n            if (getProperty('.image-answer' + idQuestion + i)) {\r\n                sum += getProperty('.image-answer' + idQuestion + i);\r\n                obj['.image-answer' + idQuestion + i] = 0;\r\n            }\r\n        }\r\n\r\n        sumImageSize = sumImageSize - (getProperty('.image-question' + idQuestion) + sum);\r\n        obj['.image-question' + idQuestion] = 0;\r\n        $('.data').attr('data-question', number_qs);\r\n        $('.question' + idQuestion).removeClass('animate zoomIn');\r\n        $('.question' + idQuestion).addClass('animate fadeOutDown');\r\n        setTimeout(function() {\r\n          $('.question' + idQuestion).remove();\r\n        }, 1000);\r\n    });\r\n\r\n    $(document).on('click', '.btn-remove-answer', function() {\r\n        var number = parseInt($(this).attr('num'));\r\n        var idAnswer = $(this).attr('id-as');\r\n        var idDelete = $(this).attr('data-answerId');\r\n        var trash = parseInt($('.question' + number).attr('trash'));\r\n\r\n        if (trash > 2) {\r\n            arrayAnswer.push(idDelete);\r\n            sumImageSize -= getProperty('.image-answer' + idAnswer);\r\n\r\n            obj['.image-answer' + idAnswer] = 0;\r\n            $('.question' + number).attr('trash', trash - 1);\r\n            $('.clear-as' + idAnswer).remove();\r\n            $('.qs-as' + idAnswer).remove();\r\n        }\r\n    });\r\n\r\n    $(document).on('click', '.aaaaaa', function() {\r\n        alert(arrayImageQuestion);\r\n    });\r\n\r\n    $(document).on('click', '.remove-other', function() {\r\n        var idQuestion = $(this).attr('id-qs');\r\n        var trash = parseInt($('.question' + idQuestion).attr('trash'));\r\n\r\n        if (trash > 2) {\r\n            $('.question' + idQuestion).attr('trash', trash - 1);\r\n            $('.temp-other' + idQuestion + ':last').remove();\r\n            $('.answer-other' + idQuestion).remove();\r\n            $('.other' + idQuestion).show();\r\n        }\r\n    });\r\n\r\n    $(document).on('click', '.bt-action', function() {\r\n        var url = $(this).attr('url');\r\n        window.location = url;\r\n    });\r\n\r\n    $(document).on('click', '.option-add', function() {\r\n        var url = $(this).attr('url');\r\n        var temp_as = $(this).attr('temp-as');\r\n        var temp_qs = $(this).attr('temp-qs');\r\n\r\n        if ($(this).prop('checked')) {\r\n            $.post(\r\n                url,\r\n                {\r\n                    'idQuestion': temp_qs,\r\n                    'idAnswer': temp_as,\r\n                },\r\n                function(response) {\r\n\r\n                    if (response.success) {\r\n                        $('.append-as' + temp_qs).html(response.data);\r\n                    } else {\r\n                        alert(error);\r\n                    }\r\n            });\r\n        } else {\r\n            $('.input' + temp_qs).remove();\r\n        }\r\n    });\r\n\r\n    $(document).on('click', '.option-choose', function() {\r\n        var temp_qs = $(this).attr('temp-qs');\r\n        $('.input' + temp_qs).remove();\r\n    });\r\n});\r\n"]}